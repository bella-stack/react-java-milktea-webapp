{"ast":null,"code":"import _regeneratorRuntime from\"/Users/wusixuan/Desktop/CSCE331/Project/project-3-902_02r/pos-webapp-frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"/Users/wusixuan/Desktop/CSCE331/Project/project-3-902_02r/pos-webapp-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/wusixuan/Desktop/CSCE331/Project/project-3-902_02r/pos-webapp-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/wusixuan/Desktop/CSCE331/Project/project-3-902_02r/pos-webapp-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,useContext}from'react';import DrinkCard from'./DrinkCard';import config from'./config';import{CartContext}from'./CartContext';// Adjust the path as needed\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CustomerOrder=function CustomerOrder(){var _useContext=useContext(CartContext),cart=_useContext.cart,removeFromCart=_useContext.removeFromCart;var _useState=useState('All'),_useState2=_slicedToArray(_useState,2),selectedCategory=_useState2[0],setSelectedCategory=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),drinks=_useState4[0],setDrinks=_useState4[1];var calculateTotal=function calculateTotal(){return cart.reduce(function(total,item){return total+item.price;},0);};var handleCheckout=function handleCheckout(){// TODO: Implement this\nconsole.log(\"Checkout clicked\");};var categorizeDrink=function categorizeDrink(name){var lastWord=name.trim().split(\" \").pop().toLowerCase();// Get the last word and convert to lowercase\nif(lastWord.includes(\"milk\")){return\"Milk\";}else if(lastWord.includes(\"tea\")){return\"Tea\";}else if(lastWord.includes(\"yogurt\")){return\"Yogurt\";}else{return\"Other\";}};useEffect(function(){var fetchDrinks=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data,categorizedDrinks;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"\".concat(config.REACT_APP_BACKEND_URL,\"/api/product\"));case 3:response=_context.sent;_context.next=6;return response.json();case 6:data=_context.sent;categorizedDrinks=data.map(function(drink){return _objectSpread(_objectSpread({},drink),{},{category:categorizeDrink(drink.name)// Categorize each drink\n});});setDrinks(categorizedDrinks);// Set the fetched and categorized drinks into state\n_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);console.error(\"There was an error fetching the data\",_context.t0);case 14:case\"end\":return _context.stop();}},_callee,null,[[0,11]]);}));return function fetchDrinks(){return _ref.apply(this,arguments);};}();fetchDrinks();},[]);useEffect(function(){console.log(\"Cart updated:\",cart);},[cart]);var filterDrinksByCategory=function filterDrinksByCategory(category){if(category==='All'){return drinks;}return drinks.filter(function(drink){return drink.category===category;});};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"w-4/6 mx-auto p-5\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl pb-2 font-bold text-center\",children:\"YOUR CART\"}),/*#__PURE__*/_jsx(\"div\",{className:\"border-2 rounded p-3\",children:cart.map(function(item,index){return/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center p-2\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[item.name,\" - Ice: \",item.iceLevel,\", Sweetness: \",item.sweetnessLevel,\", Price: $\",item.price]}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return removeFromCart(index);},className:\" text-white px-2 py-1 rounded-xl hover:bg-red-400 text-white bg-red-300\",children:\"REMOVE\"})]},index);})}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-2 font-semibold\",children:[\"Total Price: $\",calculateTotal().toFixed(2)]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleCheckout,className:\"bg-tiger-gray font-bold text-yellow-200 px-4 py-2 rounded block mx-auto\",children:\"CHECKOUT\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"my-4\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold\",children:\"DRINK MENU\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"my-4 flex font-bold space-x-4 justify-center\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return setSelectedCategory('All');},className:selectedCategory==='All'?'bg-tiger-gray font-bold text-yellow-200 px-4 py-2 rounded':'bg-white shadow-md px-4 py-2 rounded',children:\"ALL\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return setSelectedCategory('Milk');},className:selectedCategory==='Milk'?'bg-tiger-gray text-yellow-200 px-4 py-2 rounded':'bg-white shadow-md px-4 py-2 rounded',children:\"MILK\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return setSelectedCategory('Yogurt');},className:selectedCategory==='Yogurt'?'bg-tiger-gray text-yellow-200 px-4 py-2 rounded':'bg-white shadow-md px-4 py-2 rounded',children:\"YOGURT\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return setSelectedCategory('Tea');},className:selectedCategory==='Tea'?'bg-tiger-gray text-yellow-200 px-4 py-2 rounded':'bg-white shadow-md px-4 py-2 rounded',children:\"TEA\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4 p-5 w-4/5\",children:filterDrinksByCategory(selectedCategory).map(function(drink,index){return/*#__PURE__*/_jsx(\"div\",{className:\"overflow-hidden\",children:/*#__PURE__*/_jsx(DrinkCard,{drink:drink},index)});})})})]});};export default CustomerOrder;","map":{"version":3,"names":["React","useState","useEffect","useContext","DrinkCard","config","CartContext","jsx","_jsx","jsxs","_jsxs","CustomerOrder","_useContext","cart","removeFromCart","_useState","_useState2","_slicedToArray","selectedCategory","setSelectedCategory","_useState3","_useState4","drinks","setDrinks","calculateTotal","reduce","total","item","price","handleCheckout","console","log","categorizeDrink","name","lastWord","trim","split","pop","toLowerCase","includes","fetchDrinks","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","data","categorizedDrinks","wrap","_callee$","_context","prev","next","fetch","concat","REACT_APP_BACKEND_URL","sent","json","map","drink","_objectSpread","category","t0","error","stop","apply","arguments","filterDrinksByCategory","filter","children","className","index","iceLevel","sweetnessLevel","onClick","toFixed"],"sources":["/Users/wusixuan/Desktop/CSCE331/Project/project-3-902_02r/pos-webapp-frontend/src/CustomerOrder.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\nimport DrinkCard from './DrinkCard';\nimport config from './config';\nimport { CartContext } from './CartContext'; // Adjust the path as needed\n\nconst CustomerOrder = () => {\n\n  const { cart, removeFromCart } = useContext(CartContext);\n\n  const [selectedCategory, setSelectedCategory] = useState('All');\n  const [drinks, setDrinks] = useState([]);\n\n  const calculateTotal = () => {\n    return cart.reduce((total, item) => total + item.price, 0);\n  };\n\n  const handleCheckout = () => {\n    // TODO: Implement this\n    console.log(\"Checkout clicked\");\n    \n  };\n\n  const categorizeDrink = (name) => {\n    const lastWord = name.trim().split(\" \").pop().toLowerCase(); // Get the last word and convert to lowercase\n    if (lastWord.includes(\"milk\")) {\n      return \"Milk\";\n    } else if (lastWord.includes(\"tea\")) {\n      return \"Tea\";\n    } else if (lastWord.includes(\"yogurt\")) {\n      return \"Yogurt\";\n    } else {\n      return \"Other\";\n    }\n  };\n\n  useEffect(() => {\n    const fetchDrinks = async () => {\n      try {\n        const response = await fetch(`${config.REACT_APP_BACKEND_URL}/api/product`);\n        const data = await response.json();\n        const categorizedDrinks = data.map(drink => ({\n          ...drink,\n          category: categorizeDrink(drink.name) // Categorize each drink\n        }));\n        setDrinks(categorizedDrinks); // Set the fetched and categorized drinks into state\n      } catch (error) {\n        console.error(\"There was an error fetching the data\", error);\n      }\n    };\n  \n    fetchDrinks();\n  }, []);\n\n  useEffect(() => {\n    console.log(\"Cart updated:\", cart);\n  }, [cart]);\n\n\n  const filterDrinksByCategory = (category) => {\n    if (category === 'All') {\n      return drinks;\n    }\n    return drinks.filter((drink) => drink.category === category);\n  };\n\n  return (\n    <div>\n      \n      <div className=\"w-4/6 mx-auto p-5\">\n          <h2 className=\"text-2xl pb-2 font-bold text-center\">YOUR CART</h2>\n          <div className=\"border-2 rounded p-3\">\n              {cart.map((item, index) => (\n                  <div className=\"flex justify-between items-center p-2\" key={index}>\n                  <span>\n                    {item.name} - Ice: {item.iceLevel}, Sweetness: {item.sweetnessLevel}, Price: ${item.price}\n                  </span>\n                  <button \n                    onClick={() => removeFromCart(index)}\n                    className=\" text-white px-2 py-1 rounded-xl hover:bg-red-400 text-white bg-red-300\"\n                  >\n                    REMOVE\n                  </button>\n                </div>\n              ))}\n          </div>\n          <div className=\"text-center p-2 font-semibold\">Total Price: ${calculateTotal().toFixed(2)}</div>\n          <button onClick={handleCheckout} className=\"bg-tiger-gray font-bold text-yellow-200 px-4 py-2 rounded block mx-auto\">CHECKOUT</button>\n      </div>\n\n      <div className=\"my-4\">\n        <h2 className=\"text-2xl font-bold\">DRINK MENU</h2>\n      </div>\n\n      <div className=\"my-4 flex font-bold space-x-4 justify-center\">\n        <button onClick={() => setSelectedCategory('All')} className={selectedCategory === 'All' ? 'bg-tiger-gray font-bold text-yellow-200 px-4 py-2 rounded' : 'bg-white shadow-md px-4 py-2 rounded'}>\n          ALL\n        </button>\n        <button onClick={() => setSelectedCategory('Milk')} className={selectedCategory === 'Milk' ? 'bg-tiger-gray text-yellow-200 px-4 py-2 rounded' : 'bg-white shadow-md px-4 py-2 rounded'}>\n          MILK\n        </button>\n        <button onClick={() => setSelectedCategory('Yogurt')} className={selectedCategory === 'Yogurt' ? 'bg-tiger-gray text-yellow-200 px-4 py-2 rounded' : 'bg-white shadow-md px-4 py-2 rounded'}>\n          YOGURT\n        </button>\n        <button onClick={() => setSelectedCategory('Tea')} className={selectedCategory === 'Tea' ? 'bg-tiger-gray text-yellow-200 px-4 py-2 rounded' : 'bg-white shadow-md px-4 py-2 rounded'}>\n          TEA\n        </button>\n      </div>\n\n      <div className=\"flex justify-center\">\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 p-5 w-4/5\">\n            {filterDrinksByCategory(selectedCategory).map((drink, index) => (\n                <div className=\"overflow-hidden\">\n                    <DrinkCard key={index} drink={drink} />\n                </div>\n            ))}\n        </div>\n      </div>\n\n\n    </div>\n  );\n};\n\nexport default CustomerOrder;\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}