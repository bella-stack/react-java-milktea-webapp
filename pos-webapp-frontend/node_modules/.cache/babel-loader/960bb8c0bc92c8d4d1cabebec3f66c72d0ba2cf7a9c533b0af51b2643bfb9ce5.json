{"ast":null,"code":"import _defineProperty from\"/Users/wusixuan/Desktop/CSCE331/Project/project-3-902_02r/pos-webapp-frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/wusixuan/Desktop/CSCE331/Project/project-3-902_02r/pos-webapp-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/wusixuan/Desktop/CSCE331/Project/project-3-902_02r/pos-webapp-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import config from'./config';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function InventoryList(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),items=_useState2[0],setItems=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),editedItems=_useState6[0],setEditedItems=_useState6[1];useEffect(function(){fetchData();},[]);var fetchData=function fetchData(){setLoading(true);fetch(\"\".concat(config.REACT_APP_BACKEND_URL,\"/api/inventory\")).then(function(response){return response.json();}).then(function(data){setItems(data);setLoading(false);}).catch(function(error){console.error(\"There was an error fetching the data\",error);setLoading(false);});};var handleQuantityChange=function handleQuantityChange(event,id){var newQuantity=parseInt(event.target.value,10);if(!isNaN(newQuantity)){setEditedItems(function(prevItems){return _objectSpread(_objectSpread({},prevItems),{},_defineProperty({},id,_objectSpread(_objectSpread({},prevItems[id]),{},{quantity:newQuantity})));});}};var saveChanges=function saveChanges(){var updatePromises=Object.entries(editedItems).map(function(_ref){var _ref2=_slicedToArray(_ref,2),id=_ref2[0],data=_ref2[1];return fetch(\"\".concat(process.env.REACT_APP_BACKEND_URL,\"/api/inventory/\").concat(id),{method:'PUT',//HERE is where calling backend API\nheaders:{'Content-Type':'application/json'},body:JSON.stringify(data)});});Promise.all(updatePromises).then(function(){fetchData();setEditedItems({});}).catch(function(error){return console.error('There was an error updating the items',error);});};if(loading){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Inventory Items\"}),/*#__PURE__*/_jsx(\"button\",{onClick:saveChanges,disabled:loading||Object.keys(editedItems).length===0,children:\"Save Changes\"}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Quantity\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Cost\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Price\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Is Addon?\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Update Quantity\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:items.map(function(item){var _editedItems$item$id$,_editedItems$item$id;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:item.id}),/*#__PURE__*/_jsx(\"td\",{children:item.name}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:(_editedItems$item$id$=(_editedItems$item$id=editedItems[item.id])===null||_editedItems$item$id===void 0?void 0:_editedItems$item$id.quantity)!==null&&_editedItems$item$id$!==void 0?_editedItems$item$id$:item.quantity,onChange:function onChange(event){return handleQuantityChange(event,item.id);}})}),/*#__PURE__*/_jsx(\"td\",{children:item.cost}),/*#__PURE__*/_jsx(\"td\",{children:item.price}),/*#__PURE__*/_jsx(\"td\",{children:item.isaddon?'Yes':'No'})]},item.id);})})]})]});}export default InventoryList;","map":{"version":3,"names":["React","useState","useEffect","config","jsx","_jsx","jsxs","_jsxs","InventoryList","_useState","_useState2","_slicedToArray","items","setItems","_useState3","_useState4","loading","setLoading","_useState5","_useState6","editedItems","setEditedItems","fetchData","fetch","concat","REACT_APP_BACKEND_URL","then","response","json","data","catch","error","console","handleQuantityChange","event","id","newQuantity","parseInt","target","value","isNaN","prevItems","_objectSpread","_defineProperty","quantity","saveChanges","updatePromises","Object","entries","map","_ref","_ref2","process","env","method","headers","body","JSON","stringify","Promise","all","children","onClick","disabled","keys","length","item","_editedItems$item$id$","_editedItems$item$id","name","type","onChange","cost","price","isaddon"],"sources":["/Users/wusixuan/Desktop/CSCE331/Project/project-3-902_02r/pos-webapp-frontend/src/InventoryList.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport config from './config'; \n\nfunction InventoryList() {\n    const [items, setItems] = useState([]);\n    const [loading, setLoading] = useState(true);\n    const [editedItems, setEditedItems] = useState({});\n\n    useEffect(() => {\n        fetchData();\n    }, []);\n\n    const fetchData = () => {\n        setLoading(true);\n        fetch(`${config.REACT_APP_BACKEND_URL}/api/inventory`)\n            .then(response => response.json())\n            .then(data => {\n                setItems(data);\n                setLoading(false);\n            })\n            .catch(error => {\n                console.error(\"There was an error fetching the data\", error);\n                setLoading(false);\n            });\n    };\n\n    const handleQuantityChange = (event, id) => {\n        const newQuantity = parseInt(event.target.value, 10);\n        if (!isNaN(newQuantity)) {\n            setEditedItems(prevItems => ({\n                ...prevItems,\n                [id]: { ...prevItems[id], quantity: newQuantity },\n            }));\n        }\n    };\n\n    const saveChanges = () => {\n        const updatePromises = Object.entries(editedItems).map(([id, data]) =>\n            fetch(`${process.env.REACT_APP_BACKEND_URL}/api/inventory/${id}`, {\n                method: 'PUT',//HERE is where calling backend API\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify(data),\n            })\n        );\n\n        Promise.all(updatePromises)\n            .then(() => {\n                fetchData(); \n                setEditedItems({}); \n            })\n            .catch(error => console.error('There was an error updating the items', error));\n    };\n\n    if (loading) {\n        return <div>Loading...</div>;\n    }\n\n    return (\n        <div>\n            <h2>Inventory Items</h2>\n            <button onClick={saveChanges} disabled={loading || Object.keys(editedItems).length === 0}>\n                Save Changes\n            </button>\n            <table>\n                <thead>\n                    <tr>\n                        <th>ID</th>\n                        <th>Name</th>\n                        <th>Quantity</th>\n                        <th>Cost</th>\n                        <th>Price</th>\n                        <th>Is Addon?</th>\n                        <th>Update Quantity</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    {items.map(item => (\n                        <tr key={item.id}>\n                            <td>{item.id}</td>\n                            <td>{item.name}</td>\n                            <td>\n                                <input\n                                    type=\"number\"\n                                    value={editedItems[item.id]?.quantity ?? item.quantity}\n                                    onChange={(event) => handleQuantityChange(event, item.id)}\n                                />\n                            </td>\n                            <td>{item.cost}</td>\n                            <td>{item.price}</td>\n                            <td>{item.isaddon ? 'Yes' : 'No'}</td>\n                        </tr>\n                    ))}\n                </tbody>\n            </table>\n        </div>\n    );\n}\n\nexport default InventoryList;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}